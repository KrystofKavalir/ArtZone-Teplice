<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/Img/logo_v2_icon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/Style/index.css">
    <title>ArtZone Teplice</title>
    <script>
        function openNav() {
            document.getElementById("sidebar").style.width = "250px";
        }

        function closeNav() {
            document.getElementById("sidebar").style.width = "0";
        }
    </script>
</head>
<body>
    <header id="header">
        <a href="/" class="logo"><img class="logo" src="/Img/logo.png"></a>

        <nav class="navBar">
            <a href="/" class="active">Domů</a>
            <a href="/umelci">Umělci</a>
            <a href="/kalendar">Kalendář akcí</a>
            <a href="/kontakt">Kontakt</a>
        </nav>

        <span class="openbtn" onclick="openNav()">&#9776; Menu</span>
        <!-- pujde do vsech souboru -->

        <div class="profilMain w3-display-right" id="profilMain">
            <div class="profPic profPicB w3-display-right">
                <img class="profPic w3-circle" src="https://static.vecteezy.com/system/resources/previews/005/544/718/non_2x/profile-icon-design-free-vector.jpg" alt="">
            </div>
            <div class="prof" id="profPanel">
                <h4><% if (name) { %>
                        <%= name %>
                    <% } else { %>
                        Uživatel
                    <% } %>
                </h4>
                <a href="/profil"><% if (name) { %>
                    Profil
                <% } else { %>
                    Přihlásit se
                <% } %></a>
            </div>
        </div>
        <!-- Overlay pro zatemnění -->
        <div id="profileOverlay" class="profile-overlay"></div>
        <!-- Panel pod headerem pro mobilní zobrazení -->
        <div id="profPanelMobile" class="profMobilePanel">
            <h4><% if (name) { %>
                    <%= name %>
                <% } else { %>
                    Uživatel
                <% } %>
            </h4>
            <a href="/profil"><% if (name) { %>
                Profil
            <% } else { %>
                Přihlásit se
            <% } %></a>
        </div>
        <!-- konec -->
    </header>

    <div id="sidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="/">Domů</a>
        <a href="/umelci">Umělci</a>
        <a href="/kalendar" class="active">Kalendář akcí</a>
        <a href="/kontakt">Kontakt</a>
    </div>

    <div class="text-center mainText pt-3 pt-md-3 pt-lg-3" style="padding-top: 50px;">
        <h2 class="display-5">Vítejte na stránkách projektu</h2>
        <h1 class="display-1"><span class="text-success">A</span>rt<span class="text-danger">Z</span>one <span class="text-primary">T</span>eplice!</h1>
    </div>

    <hr class="my-5">

    <div id="nejblAkceDiv" class="container my-5">
        <% if (closestAkce) { %>
            <h3 class="text-center mb-4">Nejbližší akce:</h3>
            <div class="d-flex justify-content-center">
                <div class="card shadow-lg border-0 bg-light px-2 py-4 squircle-card" style="max-width: 700px; width: 100%;">
                    <div class="card-body p-4 squircle-inner">
                        <h4 class="card-title fw-bold text-primary mb-3"><%= closestAkce.title %></h4>
                        <div class="mb-2">
                            <span class="badge bg-primary px-4 py-2 fs-5 rounded-pill shadow-sm">
                                <i class="bi bi-calendar-event"></i>
                                <%= closestAkce.start.toLocaleString() %>
                            </span>
                        </div>
                        <h5 class="mt-4 mb-2 text-secondary">O co jde?</h5>
                        <p class="card-text fs-5 mb-4">
                            <%= closestAkce.podrobnosti.length > 300 
                                ? closestAkce.podrobnosti.substring(0, 300) + " ..." 
                                : closestAkce.podrobnosti %>
                        </p>
                        <div class="d-flex justify-content-end">
                            <a href="/akce/<%= closestAkce.id %>" class="btn btn-primary btn-lg rounded-pill shadow px-4">
                                Více informací
                                <i class="bi bi-arrow-right ms-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        <% } else { %>
            <h3 class="text-center">Žádné nadcházející akce</h3>
        <% } %>
    </div>

    <div class="container my-5">
        <h2 class="text-center">Kdo jsme?</h2>
        <div class="row mt-4">
            <div class="col-md-8">
                <p class="text-justify">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cupiditate exercitationem, nemo iusto placeat aliquid rem veritatis ad commodi! Numquam eveniet eaque omnis quasi voluptatum nam často nisi voluptatem voluptatibus facere!
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Obcaecati perferendis temporibus maxime laudantium praesentium, voluptatibus laboriosam dolorem iusto rerum, molestiae ipsa commodi unde. Voluptatem ipsa, deleniti iusto exercitationem in inventore!
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Facere eveniet nemo non něco nihil deleniti aliquam, perspiciatis dolorum quo reiciendis necessitatibus impedit sit officiis laudantium. Jsou podobné i následné důsledky.
                </p>
            </div>
            <div class="col-md-4 d-flex flex-wrap justify-content-center">
                <div class="obrazkyKdoJsme">
                    <img src="/Img/test_img.jpg" alt="">
                    <img src="/Img/test_img.jpg" alt="">
                    <img src="/Img/test_img.jpg" alt="">
                    <img src="/Img/test_img.jpg" alt="">
                </div>
            </div>
        </div>
    </div>

    <hr class="my-5">

    <div class="text-center py-5">
        <h1 class="mb-4">Chtěli by jste s námi spolupracovat?</h1>
        <h2>Tak nahlédněte do karty <a href="/kontakt" class="text-primary">Kontakt</a> a spojte se s námi</h2>
        <% if (roleId === 2) { %>
            <a href="/userAddAkce" class="btn btn-success mt-4">Přidat akci</a>
        <% } %>
    </div>

    <!-- Přidej do <head> pokud ještě nemáš: -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</body>
</html>

<style>
/* Squircle efekt pro kartu */
.squircle-card {
    border-radius: 2.2rem !important;
    box-shadow: 0 8px 32px rgba(0,0,0,0.13) !important;
    overflow: hidden;
    background: #f8fafc;
}
.squircle-inner {
    border-radius: 2rem !important;
    background: #fff;
}

.mainText {
    padding-top: 0 !important;
}

@media (max-width: 768px) {
    .mainText {
        padding-top: 0 !important;
    }
}
</style>

<script>
    // filepath: d:\ArtZone Teplice\ArtZone-Teplice\views\index.ejs
    // Mobilní rozbalení profilu pod headerem + overlay
    document.addEventListener('DOMContentLoaded', function () {
        const profilMain = document.getElementById('profilMain');
        const profPanelMobile = document.getElementById('profPanelMobile');
        const profileOverlay = document.getElementById('profileOverlay');
        let isMobile = window.innerWidth < 950;

        function updateMobileFlag() {
            isMobile = window.innerWidth < 950;
            if (!isMobile) {
                profPanelMobile.classList.remove('show');
                profileOverlay.classList.remove('show');
            }
        }
        window.addEventListener('resize', updateMobileFlag);

        profilMain.addEventListener('click', function (e) {
            if (isMobile) {
                e.preventDefault();
                profPanelMobile.classList.toggle('show');
                profileOverlay.classList.toggle('show');
            }
        });

        // Kliknutí mimo panel nebo na overlay zavře panel
        document.addEventListener('click', function (e) {
            if (
                isMobile &&
                !profilMain.contains(e.target) &&
                !profPanelMobile.contains(e.target)
            ) {
                profPanelMobile.classList.remove('show');
                profileOverlay.classList.remove('show');
            }
        });
        // Kliknutí na overlay zavře panel
        profileOverlay.addEventListener('click', function () {
            profPanelMobile.classList.remove('show');
            profileOverlay.classList.remove('show');
        });
    });
</script>